{% extends "base.html" %}
{% block container-content %}
    <div class="file-upload-block">
        <h5>Upload everything from an existing XLS file</h5>
        <form action={% url 'upload-xls'  %} method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form }}
            <button class="btn btn-primary" type="submit">Upload</button>
        </form>
    </div>
    <div class="file-upload-block">
        <h5>Delete measurements from an XLS file</h5>
        <form action={% url 'delete'  %} method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form }}
            <button class="btn btn-primary" type="submit">Upload</button>
        </form>
    </div>

    {% if log %}
    <div class="row mt-4">
        <div class="col-md-12">
        <h3>Upload results {% if error_count != 0 %}&mdash; <span class="badge badge-warning">there were errors during the import</span>{% endif %}</h3>
        <ul class="list-group">
            {% for log_entry in log %}
            <li class="list-group-item">
                {% if log_entry.level == "INFO" %}
                    <span class="badge badge-success mr-3">
                {% elif log_entry.level == "ERROR"  %}
                    <span class="badge badge-danger mr-3">
                {% else  %}
                    <span class="badge badge-warning mr-3">
                {% endif %}
                {{ log_entry.level }}</span>{{ log_entry.message }}
            </li>
            {% endfor %}
        </ul>        
        </div>
    </div>
    {% endif %}
{% endblock container-content %}
